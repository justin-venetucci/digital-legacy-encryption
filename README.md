# Digital Legacy Encryption Suite

A lightweight, cross-platform (Windows/Linux/macOS) set of interactive Python scripts leveraging the `age` encryption tool and a Shamir Secret Sharing plugin to securely encrypt and decrypt sensitive documents (e.g., password lists) in the event of your incapacitation... or just because!

## Features

* **Shamir Secret Sharing**: Split your decryption secret into multiple shares (default 3 shares, threshold of 2) for distributed access.
* **No external Python dependencies**: Works with any global or virtual Python installation.
* **Dynamic, self-contained paths**: All scripts reference binaries and resources relative to the repo root.
* **Clear CLI guided workflow**: Step-by-step prompts in both encryption and decryption.

## Prerequisites

1. **Python 3.8+** installed globally or in a virtual environment.
2. **`age`** CLI [version ≥ 1.0.0 recommended].
3. **`age-plugin-sss`** (Shamir Secret Sharing plugin for `age`).

&nbsp;
> **Note**: I do *not* include the actual binaries in this repo. You must download the appropriate executables for your platform and place them into the `internals/binaries` folder (see below).

### Installing `age` & `age-plugin-sss`

#### Windows (Chocolatey)

```powershell
choco install age
```

#### macOS (Homebrew)

```bash
brew install age
```

## Repository Layout

```
├── internals/
│   └── binaries/
│       ├── age.exe.placeholder            # Windows: rename your downloaded age.exe here
│       ├── age-keygen.exe.placeholder     # Windows: rename your downloaded age-keygen.exe here
│       ├── age-plugin-sss.exe.placeholder # Windows: rename the plugin binary here
│       └── (macOS users: drop executables without `.exe` extension)
├── scripts/
│   ├── encrypt.py       # CLI script to encrypt a document and generate key shares
│   ├── decrypt.py       # CLI script to collect shares and decrypt an encrypted file
│   └── resources/
│       └── ascii.txt    # Optional ASCII art for script headers
├── sample-keys/         # Example Shamir-share YAML files (for demonstration only)
├── encrypted/
│   ├── recipients.yaml  # Generated by encrypt.py: records recipients’ public keys
│   └── <yourfile>.age   # Your encrypted document
├── "Decrypt My Information-Windows.bat"  # Wrapper for decrypt.py on Windows
├── "Decrypt My Information-MacOS.sh"   # Wrapper for decrypt.py on macOS
└── LICENSE.txt
```

## Setup

1. **Clone this repo**:

    ```bash
    git clone https://github.com/justin-venetucci/digital-legacy-encryption.git cd digital-legacy-encryption
    ```

2. **(Optional) Create a virtual environment**:

    ```bash
    python -m venv .venv
    source .venv/bin/activate  # macOS/Linux
    .\.venv\Scripts\activate # Windows
    ```

3. **Download `age` & plugin binaries** and place them in `internals/binaries`:

   * Rename your downloaded `age` binary to `age.exe` (Windows) or `age` (macOS).
   * Rename/move the Shamir plugin to `age-plugin-sss.exe` (Windows) or `age-plugin-sss` (macOS).
   * Make sure they are executable (`chmod +x internals/binaries/age-plugin-sss` on macOS).

4. **Verify installation**:

    ```bash
    internals/binaries/age --version
    internals/binaries/age-plugin-sss --help
    ```

## Usage

### 1. Encryption (Generate Shares)

(Primarily for technical users. Didn't develop this one as verbosely... actually just passed a couple bullet points into Claude to generate a compliment to the fully self-developed decrypt script.)

```bash
python scripts/encrypt.py
````

The script will prompt you to:

1. Select the file you want to encrypt.
2. Enter the total number of shares to generate (1-10).
3. Enter the threshold of shares to decrypt (1-10).
4. Create new keys (choice 1) or write to an existing or new recipients.yaml file (choice 2).

Outputs:

* `encrypted/<yourfile> - Encrypted YYYY-MM-DD.ext.age` (in binary form with age-v1 header.)
* `encrypted/recipients.yaml` (stores metadata on public keys used to encrypt, allowing for enhanced validation upon decryption)

### 2. Decryption (Collect Shares)

#### Windows

```powershell
"Decrypt My Information-Windows.bat"
```

#### macOS

```bash
./"Decrypt My Information-MacOS.sh"
```

This script is easy for non-technical users (like your legacy's beneficiaries) and has robust error handling to provide additional context. It will guide your beneficiaries through 5 steps:

1. **Getting Started**: Info on required shares.
2. **Upload Key First Share**: Prompt to select Shamir-share YAML files. Validates format, duplication, and matching to the encrypted file.
3. **Continue Uploading Shares**: Repeat until threshold reached.
4. **Decrypt**: Combines shares, decrypts the `.age` file, and writes the output (e.g., `...- Decrypted YYYY-MM-DD.pdf`). Current output location is the desktop.
5. **Open**: Optionally open the decrypted file.

Outputs:

* `(Desktop)/[SENSITIVE] <yourfile> - Decrypted YYYY-MM-DD.ext`. Obviously, keep this file safe.

Sample error conditions and messages:

* **Invalid format**: If a YAML share is malformed.
* **Wrong key**: If the share doesn’t match the encrypted file. (per `recipients.yaml`)
* **Duplicate**: If the same key file is re-uploaded.

## Troubleshooting

* **Missing binaries**: If you see an error about `age` or `age-plugin-sss` not found, verify they are placed under `internals/binaries` and named correctly.
* **Permission denied**: On macOS, run `chmod +x internals/binaries/*`.
* **YAML parse error**: Ensure your share files are intact YAML exports from `encrypt.py`.

## License

This project is licensed under the terms of the [MIT License](LICENSE.txt).
